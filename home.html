<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maps</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
</head>


<body>
    <div id="alerta">
        <h1>Bem vindo ao PrudenTour!</h1>
        <h6>Ande com o Personagem e descubra os atrativos de Prudente</h6>
    </div>
    <div id="map"></div>
    <div id="card" style="display: none;">
        <img src="../mapa/img/museu.jpg" alt="" id="card-image">
    </div>

    <img src="../mapa/img/giulia.png" alt="" id="character">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>

        const character = document.getElementById('character');
        const alerta = document.getElementById('alerta');

        let xPosition = window.innerWidth / 1.2;
        let yPosition = window.innerHeight / 1.2;
        let imgfixa = '';
        let imgindex = 0;
        let bgPositionX = 0;
        let step = 10

        character.style.left = window.innerWidth / 1.2 + 'px';
        character.style.top = window.innerHeight / 1.2 + 'px';

        alerta.style.left = window.innerWidth / 4 + 'px';
        alerta.style.top = window.innerHeight / 4 + 'px';



        document.addEventListener('keydown', (event) => {
            const key = event.key
            document.getElementById("alerta").style.display = "none";
            if (key === 'ArrowUp') {
                yPosition -= 10;
                imgindex = (imgindex + 1) % 5;
                //character  'scaleX(-1)';
                imgfixa = '../mapa/img/tras/tras'
            } else if (key === 'ArrowDown') {
                yPosition += 10;
                imgindex = (imgindex + 1) % 8;
                //character  'scaleX(-1)';
                imgfixa = '../mapa/img/right/giulia'
            } else if (key === 'ArrowLeft') {
                xPosition -= 10;
                imgindex = (imgindex + 1) % 8;
                //character  'scaleX(1)';
                imgfixa = '../mapa/img/left/esquerda'

            } else if (key === 'ArrowRight') {
                xPosition += 10;
                imgindex = (imgindex + 1) % 8;
                //character  'scaleX(1)';
                imgfixa = '../mapa/img/right/giulia'
            }



            const imgSrc = `${imgfixa}${imgindex}.png`
            character.src = imgSrc
            character.style.left = xPosition + 'px';
            character.style.top = yPosition + 'px';



        });
        setTimeout(() => {
            document.getElementById("alerta").style.display = "none";
        }, 5000);

        const map = L.map('map').setView([-22.120530755875148, -51.40559483356016], 25);

        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        L.marker([-22.120530755875148, -51.40559483356016]).addTo(map)
            .bindPopup('Senai')
            .openPopup();
        L.marker([-22.183350843361765, -51.38548184752809]).addTo(map)
            .bindPopup('Cidade da Criança')
            .openPopup();
        L.marker([-22.12355275180193, -51.40244938985967]).addTo(map)
            .bindPopup('Parque do Povo')
            .openPopup();
        L.marker([-22.120610067259015, -51.37947325079412]).addTo(map)
            .bindPopup('Matarazzo')
            .openPopup();
        L.marker([-22.12022849431053, -51.4139252032715]).addTo(map)
            .bindPopup('Sesc')
            .openPopup();
        L.marker([-22.116477209903824, -51.411605061024744]).addTo(map)
            .bindPopup('Museu Histórico')
            .openPopup();

        var circle = L.circle([-22.116477209903824, -51.411605061024744], {
            radius: 40
        });

        function point() {


            if (character == circle) {
                document.getElementById("card").style.display = "flex";
                document.getElementById("card-image").src = "../mapa/img/museu.jpg";
            } else {
                document.getElementById("card").style.display = "none";
            }
        }

        point();



    </script>
    <script src="script.js"></script>
</body>

</html>